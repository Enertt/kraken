import qrCode from '/Qr-code.svg'
import styles from './SecondSection.module.scss'
import TransferField from './transfer-field/TransferField'
import btcIcon from './assets/BTC-currency.svg'
import { useEffect } from 'react'
import { useState } from 'react'

const SecondSection = () => {
	const initialTime = 30 * 60
	const [timeRemaining, setTimeRemaining] = useState(initialTime)

	useEffect(() => {
		let timerInterval = null

		if (timeRemaining > 0) {
			timerInterval = setInterval(() => {
				setTimeRemaining(prevTime => prevTime - 1)
			}, 1000)
		}

		return () => {
			clearInterval(timerInterval)
		}
	}, [timeRemaining])

	const formatTime = seconds => {
		const minutes = Math.floor(seconds / 60)
		const remainingSeconds = seconds % 60

		const formattedMinutes = String(minutes).padStart(2, '0')
		const formattedSeconds = String(remainingSeconds).padStart(2, '0')

		return [
			formattedMinutes.charAt(0),
			formattedMinutes.charAt(1),
			formattedSeconds.charAt(0),
			formattedSeconds.charAt(1)
		]
	}

	const [minuteFirst, minuteSecond, secondFirst, secondSecond] =
		formatTime(timeRemaining)
	return (
		<div className={styles.block}>
			<div className={styles.qrCodeSection}>
				<div className={styles.qrCode}>
					<img src={qrCode} alt='qr code' />
				</div>
				<div className={styles.label}>
					<svg
						xmlns='http://www.w3.org/2000/svg'
						width='18'
						height='18'
						viewBox='0 0 18 18'
						fill='none'
					>
						<g clipPath='url(#clip0_45_17487)'>
							<path
								d='M0.81819 6.54545C0.327282 6.54545 0 6.21817 0 5.72726V2.45454C0 1.06363 1.06363 0 2.45454 0H5.72726C6.21817 0 6.54545 0.327282 6.54545 0.81819C6.54545 1.3091 6.21817 1.63638 5.72726 1.63638H2.45454C1.96363 1.63638 1.63635 1.96366 1.63635 2.45457V5.72729C1.63638 6.21817 1.3091 6.54545 0.81819 6.54545Z'
								fill='#7781A4'
							/>
							<path
								d='M17.1814 6.54545C16.6905 6.54545 16.3632 6.21817 16.3632 5.72726V2.45454C16.3632 1.96363 16.0359 1.63635 15.545 1.63635H12.2723C11.7814 1.63635 11.4541 1.30906 11.4541 0.818156C11.4541 0.327249 11.7814 0 12.2723 0H15.545C16.9359 0 17.9995 1.06363 17.9995 2.45454V5.72726C17.9996 6.21817 17.6723 6.54545 17.1814 6.54545Z'
								fill='#7781A4'
							/>
							<path
								d='M5.72726 18H2.45453C1.06363 18 0 16.9364 0 15.5455V12.2728C0 11.7819 0.327282 11.4546 0.818189 11.4546C1.3091 11.4546 1.63638 11.7819 1.63638 12.2728V15.5455C1.63638 16.0364 1.96366 16.3637 2.45457 16.3637H5.72729C6.2182 16.3637 6.54548 16.691 6.54548 17.1819C6.54545 17.6728 6.21817 18 5.72726 18Z'
								fill='#7781A4'
							/>
							<path
								d='M15.545 18.0001H12.2723C11.7814 18.0001 11.4541 17.6728 11.4541 17.1819C11.4541 16.691 11.7814 16.3637 12.2723 16.3637H15.545C16.0359 16.3637 16.3632 16.0364 16.3632 15.5455V12.2728C16.3632 11.7819 16.6905 11.4546 17.1814 11.4546C17.6723 11.4546 17.9996 11.7819 17.9996 12.2728V15.5455C17.9995 16.9364 16.9359 18.0001 15.545 18.0001Z'
								fill='#7781A4'
							/>
							<path
								d='M7.36337 8.18205H4.09065C3.59974 8.18205 3.27246 7.85477 3.27246 7.36386V4.09114C3.27246 3.60023 3.59974 3.27295 4.09065 3.27295H7.36337C7.85428 3.27295 8.18156 3.60023 8.18156 4.09114V7.36386C8.18156 7.85477 7.85428 8.18205 7.36337 8.18205ZM4.90884 6.54567H6.54522V4.90929H4.90884V6.54567Z'
								fill='#7781A4'
							/>
							<path
								d='M7.36337 14.7275H4.09065C3.59974 14.7275 3.27246 14.4002 3.27246 13.9093V10.6365C3.27246 10.1456 3.59974 9.81836 4.09065 9.81836H7.36337C7.85428 9.81836 8.18156 10.1456 8.18156 10.6365V13.9093C8.18156 14.4002 7.85428 14.7275 7.36337 14.7275ZM4.90884 13.0911H6.54522V11.4547H4.90884V13.0911Z'
								fill='#7781A4'
							/>
							<path
								d='M13.9093 8.18205H10.6365C10.1456 8.18205 9.81836 7.85477 9.81836 7.36386V4.09114C9.81836 3.60023 10.1456 3.27295 10.6365 3.27295H13.9093C14.4002 3.27295 14.7275 3.60023 14.7275 4.09114V7.36386C14.7275 7.85477 14.4002 8.18205 13.9093 8.18205ZM11.4547 6.54567H13.0911V4.90929H11.4547V6.54567Z'
								fill='#7781A4'
							/>
							<path
								d='M10.6365 12.2729C10.1456 12.2729 9.81836 11.9456 9.81836 11.4547V10.6365C9.81836 10.1456 10.1456 9.81836 10.6365 9.81836C11.1275 9.81836 11.4547 10.1456 11.4547 10.6365V11.4547C11.4547 11.9457 11.1275 12.2729 10.6365 12.2729Z'
								fill='#7781A4'
							/>
							<path
								d='M13.9088 11.4547H13.0907C12.5997 11.4547 12.2725 11.1275 12.2725 10.6365C12.2725 10.1456 12.5997 9.81836 13.0907 9.81836H13.9088C14.3997 9.81836 14.727 10.1456 14.727 10.6365C14.727 11.1275 14.3997 11.4547 13.9088 11.4547Z'
								fill='#7781A4'
							/>
							<path
								d='M13.9094 14.7272H11.4549C10.964 14.7272 10.6367 14.3999 10.6367 13.909C10.6367 13.4181 10.964 13.0908 11.4549 13.0908H13.9094C14.4004 13.0908 14.7276 13.4181 14.7276 13.909C14.7276 14.3999 14.4004 14.7272 13.9094 14.7272Z'
								fill='#7781A4'
							/>
						</g>
						<defs>
							<clipPath id='clip0_45_17487'>
								<rect width='18' height='18' fill='white' />
							</clipPath>
						</defs>
					</svg>
					<div>
						<p>Scan the code</p>
					</div>
				</div>
			</div>
			<div className={styles.section}>
				<div className={styles.sectionInfo}>
					<div className={styles.first}>
						<div className={styles.text}>
							<p>The remaining time to make the payment.</p>
						</div>
						<div className={styles.timer}>
							<div className={styles.minuteFirst}>
								<p>{minuteFirst}</p>
							</div>
							<div className={styles.minuteSecond}>
								<p>{minuteSecond}</p>
							</div>
							<svg
								xmlns='http://www.w3.org/2000/svg'
								width='5'
								height='14'
								viewBox='0 0 5 14'
								fill='none'
							>
								<rect width='5' height='5' rx='2.5' fill='#272A39' />
								<rect y='9' width='5' height='5' rx='2.5' fill='#272A39' />
							</svg>
							<div className={styles.secondFirst}>
								<p>{secondFirst}</p>
							</div>
							<div className={styles.secondSecond}>
								<p>{secondSecond}</p>
							</div>
						</div>
					</div>
					<div className={styles.second}>
						<div className={styles.text}>
							<p>Required number of confirmations</p>
						</div>
						<div className={styles.numbers}>
							<div className={styles.firstt}>
								<p>0</p>
							</div>
							<div className={styles.second}>
								<p>0</p>
							</div>
							<svg
								xmlns='http://www.w3.org/2000/svg'
								width='11'
								height='18'
								viewBox='0 0 11 18'
								fill='none'
							>
								<rect
									x='6.26465'
									y='0.65332'
									width='5'
									height='16'
									rx='2.5'
									transform='rotate(22.5823 6.26465 0.65332)'
									fill='#272A39'
								/>
							</svg>
							<div className={styles.third}>
								<p>1</p>
							</div>
							<div className={styles.fourth}>
								<p>0</p>
							</div>
						</div>
					</div>
				</div>
				<div className={styles.fields}>
					<p className={styles.label}>Sent:</p>
					<TransferField svg={btcIcon} amount={'$596'} currency={'BTC'} />
					<p className={styles.label}>To address:</p>
					<TransferField
						svg={btcIcon}
						amount={'TFAmjgickRCqDJYURG4hooUFYyWZDk2rpm'}
						currency={'BTC'}
					/>
				</div>
				<div className={styles.infoSection}>
					<div className={styles.text}>
						<p>
							Please note! 5$ fee if you will send different amount then you see
							below. after the payment was sent need to wait from 1 up to 10
							confimations before it will post on your account) Please dont
							create ticket if you didnt see 10 confirmations - 3$ fee for false
							ticket
						</p>
					</div>
					<div>
						<svg
							xmlns='http://www.w3.org/2000/svg'
							width='30'
							height='30'
							viewBox='0 0 30 30'
							fill='none'
						>
							<g clipPath='url(#clip0_45_19590)'>
								<path
									d='M15.001 0C6.71948 0 0.000976562 6.71003 0.000976562 14.9921C0.000976562 23.2821 6.71948 30 15.0009 30C23.287 30 29.9998 23.282 29.9998 14.9921C29.9999 6.71003 23.287 0 15.001 0ZM16.0699 23.3385C15.7215 23.6486 15.3178 23.8044 14.8604 23.8044C14.3872 23.8044 13.9744 23.6513 13.6221 23.3447C13.2692 23.0386 13.0924 22.6101 13.0924 22.0595C13.0924 21.5711 13.2635 21.1599 13.6046 20.8268C13.9457 20.4936 14.3641 20.327 14.8604 20.327C15.3488 20.327 15.7599 20.4936 16.0937 20.8268C16.4268 21.1599 16.594 21.571 16.594 22.0595C16.5934 22.6022 16.4188 23.0286 16.0699 23.3385ZM20.4139 12.5691C20.1463 13.0654 19.8284 13.4934 19.4597 13.8543C19.092 14.2151 18.4308 14.8216 17.4765 15.6742C17.2134 15.9148 17.0016 16.126 16.8429 16.3078C16.6843 16.4902 16.5657 16.6567 16.4883 16.8081C16.4104 16.9594 16.3506 17.1107 16.3082 17.262C16.2658 17.4128 16.202 17.6788 16.1156 18.0588C15.9688 18.8652 15.5075 19.2683 14.7322 19.2683C14.329 19.2683 13.9902 19.1367 13.7141 18.873C13.439 18.6093 13.3018 18.218 13.3018 17.6985C13.3018 17.0475 13.4029 16.4833 13.6045 16.0062C13.805 15.529 14.0732 15.1106 14.4064 14.7498C14.7401 14.389 15.1895 13.9609 15.7559 13.4646C16.2523 13.0303 16.6109 12.7029 16.8316 12.482C17.0529 12.2607 17.2388 12.0145 17.3895 11.7435C17.5414 11.4718 17.616 11.1776 17.616 10.8598C17.616 10.2392 17.3862 9.71632 16.9243 9.28999C16.463 8.86367 15.8678 8.6502 15.1388 8.6502C14.2856 8.6502 13.6576 8.86534 13.2545 9.29562C12.8513 9.7259 12.5108 10.3594 12.2313 11.1969C11.967 12.0733 11.4667 12.5114 10.7309 12.5114C10.2967 12.5114 9.93021 12.3584 9.6315 12.0523C9.33335 11.7462 9.18427 11.4148 9.18427 11.0579C9.18427 10.3216 9.42087 9.57509 9.89353 8.819C10.3667 8.06291 11.0568 7.43666 11.9642 6.94087C12.871 6.44452 13.9298 6.19604 15.1388 6.19604C16.263 6.19604 17.2552 6.40382 18.1157 6.81889C18.9763 7.23333 19.6415 7.79748 20.1107 8.51119C20.5794 9.22435 20.8143 9.99968 20.8143 10.8371C20.8154 11.495 20.6816 12.0727 20.4139 12.5691Z'
									fill='#7781A4'
								/>
							</g>
							<defs>
								<clipPath id='clip0_45_19590'>
									<rect width='30' height='30' fill='white' />
								</clipPath>
							</defs>
						</svg>
					</div>
				</div>
			</div>
			<div className={styles.help}>
				<div className={styles.text}>
					<p>You need Help?</p>
				</div>
				<div>
					<svg
						xmlns='http://www.w3.org/2000/svg'
						width='30'
						height='30'
						viewBox='0 0 30 30'
						fill='none'
					>
						<g clipPath='url(#clip0_45_19578)'>
							<path
								d='M15.001 0C6.71948 0 0.000976562 6.71003 0.000976562 14.9921C0.000976562 23.2821 6.71948 30 15.0009 30C23.287 30 29.9998 23.282 29.9998 14.9921C29.9999 6.71003 23.287 0 15.001 0ZM16.0699 23.3385C15.7215 23.6486 15.3178 23.8044 14.8604 23.8044C14.3872 23.8044 13.9744 23.6513 13.6221 23.3447C13.2692 23.0386 13.0924 22.6101 13.0924 22.0595C13.0924 21.5711 13.2635 21.1599 13.6046 20.8268C13.9457 20.4936 14.3641 20.327 14.8604 20.327C15.3488 20.327 15.7599 20.4936 16.0937 20.8268C16.4268 21.1599 16.594 21.571 16.594 22.0595C16.5934 22.6022 16.4188 23.0286 16.0699 23.3385ZM20.4139 12.5691C20.1463 13.0654 19.8284 13.4934 19.4597 13.8543C19.092 14.2151 18.4308 14.8216 17.4765 15.6742C17.2134 15.9148 17.0016 16.126 16.8429 16.3078C16.6843 16.4902 16.5657 16.6567 16.4883 16.8081C16.4104 16.9594 16.3506 17.1107 16.3082 17.262C16.2658 17.4128 16.202 17.6788 16.1156 18.0588C15.9688 18.8652 15.5075 19.2683 14.7322 19.2683C14.329 19.2683 13.9902 19.1367 13.7141 18.873C13.439 18.6093 13.3018 18.218 13.3018 17.6985C13.3018 17.0475 13.4029 16.4833 13.6045 16.0062C13.805 15.529 14.0732 15.1106 14.4064 14.7498C14.7401 14.389 15.1895 13.9609 15.7559 13.4646C16.2523 13.0303 16.6109 12.7029 16.8316 12.482C17.0529 12.2607 17.2388 12.0145 17.3895 11.7435C17.5414 11.4718 17.616 11.1776 17.616 10.8598C17.616 10.2392 17.3862 9.71632 16.9243 9.28999C16.463 8.86367 15.8678 8.6502 15.1388 8.6502C14.2856 8.6502 13.6576 8.86534 13.2545 9.29562C12.8513 9.7259 12.5108 10.3594 12.2313 11.1969C11.967 12.0733 11.4667 12.5114 10.7309 12.5114C10.2967 12.5114 9.93021 12.3584 9.6315 12.0523C9.33335 11.7462 9.18427 11.4148 9.18427 11.0579C9.18427 10.3216 9.42087 9.57509 9.89353 8.819C10.3667 8.06291 11.0568 7.43666 11.9642 6.94087C12.871 6.44452 13.9298 6.19604 15.1388 6.19604C16.263 6.19604 17.2552 6.40382 18.1157 6.81889C18.9763 7.23333 19.6415 7.79748 20.1107 8.51119C20.5794 9.22435 20.8143 9.99968 20.8143 10.8371C20.8154 11.495 20.6816 12.0727 20.4139 12.5691Z'
								fill='#7781A4'
							/>
						</g>
						<defs>
							<clipPath id='clip0_45_19578'>
								<rect width='30' height='30' fill='white' />
							</clipPath>
						</defs>
					</svg>
				</div>
			</div>
			<div className={styles.close}>
				<svg
					xmlns='http://www.w3.org/2000/svg'
					width='29'
					height='29'
					viewBox='0 0 29 29'
					fill='none'
				>
					<g clipPath='url(#clip0_45_15594)'>
						<path
							d='M14.5 0C22.4956 0 29 6.50438 29 14.5C29 22.4956 22.4956 29 14.5 29C6.50438 29 0 22.4956 0 14.5C0 6.50438 6.50438 0 14.5 0Z'
							fill='#F44336'
						/>
						<path
							d='M9.16064 18.1309C8.68827 18.6035 8.68827 19.367 9.16064 19.8396C9.39628 20.0752 9.70559 20.1936 10.0151 20.1936C10.3244 20.1936 10.6337 20.0752 10.8694 19.8396L14.5003 16.2084L18.1313 19.8396C18.367 20.0752 18.6763 20.1936 18.9856 20.1936C19.2951 20.1936 19.6044 20.0752 19.8401 19.8396C20.3124 19.367 20.3124 18.6035 19.8401 18.1309L16.2089 14.4999L19.8401 10.8689C20.3124 10.3963 20.3124 9.63278 19.8401 9.16019C19.3675 8.68781 18.6039 8.68781 18.1313 9.16019L14.5003 12.7914L10.8694 9.16019C10.3968 8.68781 9.63324 8.68781 9.16064 9.16019C8.68827 9.63278 8.68827 10.3963 9.16064 10.8689L12.7918 14.4999L9.16064 18.1309Z'
							fill='#FAFAFA'
						/>
					</g>
					<defs>
						<clipPath id='clip0_45_15594'>
							<rect
								width='29'
								height='29'
								fill='white'
								transform='matrix(-1 0 0 1 29 0)'
							/>
						</clipPath>
					</defs>
				</svg>
			</div>
		</div>
	)
}

export default SecondSection
